--[[ 
    ITALO LIBRARY
    Recriada do zero
    Compat√≠vel: PC + Mobile
    API mantida 100%
--]]

local ITALOLib = {}
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Garantir mouse liberado no PC
pcall(function()
    UIS.MouseBehavior = Enum.MouseBehavior.Default
    UIS.MouseIconEnabled = true
end)

-- ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ITALO_LIBRARY_GUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

-- ==============================
-- Notification
-- ==============================
function ITALOLib:MakeNotification(cfg)
    task.spawn(function()
        local Frame = Instance.new("Frame", ScreenGui)
        Frame.Size = UDim2.new(0, 300, 0, 70)
        Frame.Position = UDim2.new(1, -320, 1, -100)
        Frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
        Frame.BorderSizePixel = 0

        local Corner = Instance.new("UICorner", Frame)
        Corner.CornerRadius = UDim.new(0,10)

        local Title = Instance.new("TextLabel", Frame)
        Title.Size = UDim2.new(1, -20, 0, 25)
        Title.Position = UDim2.new(0,10,0,5)
        Title.Text = cfg.Name or "Notification"
        Title.TextColor3 = Color3.new(1,1,1)
        Title.BackgroundTransparency = 1
        Title.TextXAlignment = Enum.TextXAlignment.Left
        Title.Font = Enum.Font.GothamBold
        Title.TextSize = 14

        local Content = Instance.new("TextLabel", Frame)
        Content.Size = UDim2.new(1, -20, 0, 30)
        Content.Position = UDim2.new(0,10,0,30)
        Content.Text = cfg.Content or ""
        Content.TextWrapped = true
        Content.TextColor3 = Color3.fromRGB(200,200,200)
        Content.BackgroundTransparency = 1
        Content.TextXAlignment = Enum.TextXAlignment.Left
        Content.Font = Enum.Font.Gotham
        Content.TextSize = 13

        TweenService:Create(Frame, TweenInfo.new(0.3), {
            Position = UDim2.new(1, -320, 1, -180)
        }):Play()

        task.wait(cfg.Time or 4)
        Frame:Destroy()
    end)
end

-- ==============================
-- Window
-- ==============================
function ITALOLib:MakeWindow(cfg)
    local Window = {}

    local Main = Instance.new("Frame", ScreenGui)
    Main.Size = UDim2.new(0, 520, 0, 360)
    Main.Position = UDim2.new(0.5, -260, 0.5, -180)
    Main.BackgroundColor3 = Color3.fromRGB(20,20,20)
    Main.BorderSizePixel = 0
    Main.Active = true
    Main.Draggable = true

    Instance.new("UICorner", Main).CornerRadius = UDim.new(0,12)

    local Top = Instance.new("TextLabel", Main)
    Top.Size = UDim2.new(1, -40, 0, 40)
    Top.Position = UDim2.new(0,20,0,0)
    Top.Text = cfg.Name or "ITALO CLIENT"
    Top.TextColor3 = Color3.new(1,1,1)
    Top.BackgroundTransparency = 1
    Top.Font = Enum.Font.GothamBold
    Top.TextSize = 16
    Top.TextXAlignment = Enum.TextXAlignment.Left

    local Close = Instance.new("TextButton", Main)
    Close.Size = UDim2.new(0,30,0,30)
    Close.Position = UDim2.new(1,-35,0,5)
    Close.Text = "X"
    Close.BackgroundColor3 = Color3.fromRGB(35,35,35)
    Close.TextColor3 = Color3.new(1,1,1)
    Close.Font = Enum.Font.GothamBold
    Close.TextSize = 14
    Instance.new("UICorner", Close).CornerRadius = UDim.new(1,0)

    Close.MouseButton1Click:Connect(function()
        Main.Visible = not Main.Visible
    end)
    Close.TouchTap:Connect(function()
        Main.Visible = not Main.Visible
    end)

    local Tabs = Instance.new("Frame", Main)
    Tabs.Size = UDim2.new(0,140,1,-50)
    Tabs.Position = UDim2.new(0,0,0,50)
    Tabs.BackgroundColor3 = Color3.fromRGB(25,25,25)
    Tabs.BorderSizePixel = 0

    local Pages = Instance.new("Frame", Main)
    Pages.Size = UDim2.new(1,-140,1,-50)
    Pages.Position = UDim2.new(0,140,0,50)
    Pages.BackgroundTransparency = 1

    local TabLayout = Instance.new("UIListLayout", Tabs)
    TabLayout.Padding = UDim.new(0,5)

    function Window:MakeTab(cfgTab)
        local Tab = {}

        local Button = Instance.new("TextButton", Tabs)
        Button.Size = UDim2.new(1,-10,0,35)
        Button.Position = UDim2.new(0,5,0,0)
        Button.Text = cfgTab.Name
        Button.BackgroundColor3 = Color3.fromRGB(30,30,30)
        Button.TextColor3 = Color3.new(1,1,1)
        Button.Font = Enum.Font.Gotham
        Button.TextSize = 14
        Instance.new("UICorner", Button)

        local Page = Instance.new("ScrollingFrame", Pages)
        Page.Size = UDim2.new(1,0,1,0)
        Page.CanvasSize = UDim2.new(0,0,0,0)
        Page.ScrollBarImageTransparency = 1
        Page.Visible = false

        local Layout = Instance.new("UIListLayout", Page)
        Layout.Padding = UDim.new(0,8)

        Button.MouseButton1Click:Connect(function()
            for _,v in ipairs(Pages:GetChildren()) do
                if v:IsA("ScrollingFrame") then v.Visible = false end
            end
            Page.Visible = true
        end)

        Button.TouchTap:Connect(Button.MouseButton1Click)

        function Tab:AddButton(cfgBtn)
            local B = Instance.new("TextButton", Page)
            B.Size = UDim2.new(1,-10,0,40)
            B.Position = UDim2.new(0,5,0,0)
            B.Text = cfgBtn.Name
            B.BackgroundColor3 = Color3.fromRGB(35,35,35)
            B.TextColor3 = Color3.new(1,1,1)
            B.Font = Enum.Font.Gotham
            B.TextSize = 14
            Instance.new("UICorner", B)

            B.MouseButton1Click:Connect(cfgBtn.Callback)
            B.TouchTap:Connect(cfgBtn.Callback)
        end

        function Tab:AddParagraph(title, text)
            local L = Instance.new("TextLabel", Page)
            L.Size = UDim2.new(1,-10,0,60)
            L.Position = UDim2.new(0,5,0,0)
            L.Text = title.."\n"..text
            L.TextWrapped = true
            L.TextColor3 = Color3.new(1,1,1)
            L.BackgroundTransparency = 1
            L.Font = Enum.Font.Gotham
            L.TextSize = 13
        end

        return Tab
    end

    return Window
end

return ITALOLib
