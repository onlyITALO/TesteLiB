-- ITALO UNIVERSAL LIBRARY - Versão corrigida para PC e Celular
-- Mantém visual e funcionalidades do ITALO CLIENT original
-- Corrigido português e compatibilidade multiplataforma

local OrionLib = {}

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- Função universal de clique/ativação (PC + Touch)
local function connectActivated(guiButton, callback)
    guiButton.Activated:Connect(callback)
end

-- ===================== Janela Principal =====================
function OrionLib:MakeWindow(properties)
    local window = {}
    window.Name = properties.Name or "Janela"
    window.Tabs = {}
    -- Container principal
    window.Frame = Instance.new("Frame")
    window.Frame.Size = UDim2.new(0, 500, 0, 400)
    window.Frame.Position = UDim2.new(0.5, -250, 0.5, -200)
    window.Frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    window.Frame.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    
    function window:MakeTab(tabProps)
        local tab = {}
        tab.Name = tabProps.Name or "Aba"
        tab.Buttons = {}
        
        function tab:AddButton(buttonProps)
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(0, 200, 0, 40)
            btn.Position = UDim2.new(0, 10, 0, 10 + (#tab.Buttons*50))
            btn.Text = buttonProps.Name or "Botão"
            btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
            btn.TextColor3 = Color3.fromRGB(255,255,255)
            btn.Parent = window.Frame
            
            connectActivated(btn, buttonProps.Callback)
            table.insert(tab.Buttons, btn)
        end
        
        function tab:AddParagraph(title, text)
            local labelTitle = Instance.new("TextLabel")
            labelTitle.Size = UDim2.new(0, 200, 0, 30)
            labelTitle.Position = UDim2.new(0, 220, 0, 10 + (#tab.Buttons*50))
            labelTitle.Text = title
            labelTitle.TextColor3 = Color3.fromRGB(255,255,255)
            labelTitle.BackgroundTransparency = 1
            labelTitle.Parent = window.Frame
            
            local labelText = Instance.new("TextLabel")
            labelText.Size = UDim2.new(0, 260, 0, 50)
            labelText.Position = UDim2.new(0, 220, 0, 40 + (#tab.Buttons*50))
            labelText.Text = text
            labelText.TextColor3 = Color3.fromRGB(200,200,200)
            labelText.TextWrapped = true
            labelText.BackgroundTransparency = 1
            labelText.Parent = window.Frame
        end
        
        table.insert(window.Tabs, tab)
        return tab
    end
    
    return window
end

-- ===================== Notificações =====================
function OrionLib:MakeNotification(properties)
    local notif = Instance.new("Frame")
    notif.Size = UDim2.new(0, 250, 0, 80)
    notif.Position = UDim2.new(1, -260, 0, 10)
    notif.BackgroundColor3 = Color3.fromRGB(30,30,30)
    notif.Parent = LocalPlayer:WaitForChild("PlayerGui")
    
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -20, 0, 30)
    title.Position = UDim2.new(0, 10, 0, 5)
    title.Text = properties.Name or "Aviso"
    title.TextColor3 = Color3.fromRGB(255,255,255)
    title.BackgroundTransparency = 1
    title.Parent = notif
    
    local content = Instance.new("TextLabel")
    content.Size = UDim2.new(1, -20, 0, 40)
    content.Position = UDim2.new(0, 10, 0, 35)
    content.Text = properties.Content or ""
    content.TextWrapped = true
    content.TextColor3 = Color3.fromRGB(200,200,200)
    content.BackgroundTransparency = 1
    content.Parent = notif
    
    -- Remove após o tempo
    spawn(function()
        wait(properties.Time or 4)
        notif:Destroy()
    end)
end

return OrionLib
